
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Video Background Calculator</title>
  <style>
    :root{
      --panel-bg: rgba(255,255,255,0.08);
      --panel-border: rgba(255,255,255,0.18);
      --accent: rgba(255,255,255,0.95);
      --muted: rgba(255,255,255,0.7);
      --button-bg: rgba(255,255,255,0.06);
      --button-shadow: 0 6px 18px rgba(0,0,0,0.35);
      --radius: 18px;
      --panel-width: 360px;
    }

    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    .bg-video-wrap{position:fixed;inset:0;overflow:hidden;z-index:-2}
    video#bgVideo{min-width:100%;min-height:100%;width:auto;height:auto;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);object-fit:cover;filter:brightness(0.55);}

    .bg-tint{position:fixed;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.25),rgba(0,0,0,0.4));z-index:-1}

    .container{height:100%;display:flex;align-items:center;justify-content:center;padding:24px}

    .panel{
      width:var(--panel-width);max-width:calc(100% - 48px);
      background:var(--panel-bg);
      border:1px solid var(--panel-border);
      border-radius:var(--radius);
      box-shadow:var(--button-shadow);
      padding:18px;
      color:var(--accent);
      backdrop-filter: blur(8px) saturate(120%);
    }

    .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .title{font-weight:700;letter-spacing:0.2px}
    .controls{display:flex;gap:8px;align-items:center}
    .small-btn{background:transparent;border:1px solid rgba(255,255,255,0.12);padding:6px 8px;border-radius:10px;color:var(--muted);font-size:13px;cursor:pointer}

    .display{height:72px;background:transparent;border-radius:12px;padding:12px 14px;display:flex;flex-direction:column;justify-content:center;align-items:flex-end;margin-bottom:14px}
    .expr{font-size:14px;color:var(--muted);opacity:0.95;word-break:break-all}
    .result{font-size:28px;font-weight:700;color:var(--accent);}

    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    button.key{padding:16px;border-radius:12px;border:0;background:var(--button-bg);color:var(--accent);font-size:18px;cursor:pointer;box-shadow:0 8px 16px rgba(0,0,0,0.25)}
    button.key.operator{background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));font-weight:600}
    button.key.equal{grid-column:span 2;background:linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));}

    @media (max-width:420px){
      :root{--panel-width:320px}
      .display{height:64px}
    }

    input[type=file]{display:none}
  </style>
</head>
<body>

  <div class="bg-video-wrap">
    <video id="bgVideo" autoplay muted loop playsinline crossorigin>
      <source src="cal wal.mp4" type="video/mp4">
      Your browser doesn't support video backgrounds.
    </video>
  </div>
  <div class="bg-tint"></div>

  <div class="container">
    <div class="panel" role="application" aria-label="Calculator with video background">
      <div class="header">
        <div class="title">Video Calculator</div>
        <div class="controls">
          <label class="small-btn" title="Upload your own background video">
            Upload Video
            <input id="uploadVideo" type="file" accept="video/*">
          </label>
          <button id="togglePlay" class="small-btn" title="Pause / play background">Pause</button>
          <button id="changeStyle" class="small-btn" title="Toggle panel opacity">Style</button>
        </div>
      </div>

      <div class="display" aria-live="polite">
        <div id="expr" class="expr">0</div>
        <div id="res" class="result">0</div>
      </div>

      <div class="keys">
        <button class="key" data-val="7">7</button>
        <button class="key" data-val="8">8</button>
        <button class="key" data-val="9">9</button>
        <button class="key operator" data-val="/">÷</button>

        <button class="key" data-val="4">4</button>
        <button class="key" data-val="5">5</button>
        <button class="key" data-val="6">6</button>
        <button class="key operator" data-val="*">×</button>

        <button class="key" data-val="1">1</button>
        <button class="key" data-val="2">2</button>
        <button class="key" data-val="3">3</button>
        <button class="key operator" data-val="-">−</button>

        <button class="key" data-val="0">0</button>
        <button class="key" data-val=".">.</button>
        <button class="key" id="percent" data-val="%">%</button>
        <button class="key operator" data-val="+">+</button>

        <button class="key" id="clear">C</button>
        <button class="key" id="back">⌫</button>
        <button class="key equal" id="equals">=</button>
      </div>
    </div>
  </div>

  <script>
    const exprEl = document.getElementById('expr');
    const resEl = document.getElementById('res');
    const keys = document.querySelectorAll('button.key');
    const bgVideo = document.getElementById('bgVideo');
    const upload = document.getElementById('uploadVideo');
    const togglePlay = document.getElementById('togglePlay');
    const changeStyle = document.getElementById('changeStyle');

    let expr = '';

    function updateDisplay(){
      exprEl.textContent = expr || '0';
      try{
        const safe = sanitizeExpression(expr);
        if(safe.trim() === ''){ resEl.textContent = '0'; return; }
        const val = evaluateExpression(safe);
        resEl.textContent = String(val);
      }catch(e){ resEl.textContent = '—' }
    }

    function sanitizeExpression(s){
      let t = s.replace(/×/g,'*').replace(/÷/g,'/').replace(/−/g,'-');
      t = t.replace(/%/g,'/100');
      if(!/^[0-9+\-*/().\s]*$/.test(t)) throw new Error('invalid');
      return t;
    }

    function evaluateExpression(s){
      if(s.length > 200) throw new Error('too long');
      return Function('return ('+s+')')();
    }

    keys.forEach(k=>{
      k.addEventListener('click',()=>{
        const v = k.dataset.val;
        if(k.id === 'clear'){ expr=''; updateDisplay(); return; }
        if(k.id === 'back'){ expr = expr.slice(0,-1); updateDisplay(); return; }
        if(k.id === 'equals'){ try{ expr = String(evaluateExpression(sanitizeExpression(expr))); }catch(e){ expr=''; alert('Invalid expression'); } updateDisplay(); return; }
        expr += v;
        updateDisplay();
      });
    });

    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){ document.getElementById('equals').click(); e.preventDefault(); return }
      if(e.key === 'Backspace'){ document.getElementById('back').click(); return }
      if(e.key === 'Escape'){ document.getElementById('clear').click(); return }
      const allowed = '0123456789+-*/().%';
      if(allowed.includes(e.key)){
        expr += e.key;
        updateDisplay();
      }
    });

    upload.addEventListener('change', (ev)=>{
      const f = ev.target.files && ev.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      bgVideo.src = url;
      bgVideo.play();
      togglePlay.textContent = 'Pause';
    });

    togglePlay.addEventListener('click', ()=>{
      if(bgVideo.paused){ bgVideo.play(); togglePlay.textContent = 'Pause'; } else { bgVideo.pause(); togglePlay.textContent = 'Play'; }
    });

    let styleToggled = false;
    changeStyle.addEventListener('click', ()=>{
      styleToggled = !styleToggled;
      if(styleToggled){ document.documentElement.style.setProperty('--panel-bg','rgba(0,0,0,0.45)'); document.documentElement.style.setProperty('--panel-border','rgba(255,255,255,0.06)'); }
      else { document.documentElement.style.setProperty('--panel-bg','rgba(255,255,255,0.08)'); document.documentElement.style.setProperty('--panel-border','rgba(255,255,255,0.18)'); }
    });

    updateDisplay();
  </script>
</body>
</html>

